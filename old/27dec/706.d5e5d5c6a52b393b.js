(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[706],{2706:(je,ee,k)=>{"use strict";k.r(ee),k.d(ee,{SidemenuComponentsModule:()=>_}),k(4511);var y=k(8498),z=k(1626),F=k(177),E=k(8779),ce=k(5887),m=k(9417),e=k(4438),V=k(7673),N=k(9437);let G=(()=>{class a{constructor(i){this.http=i,this.apiUrl="https://ek-reps.com:4444/api"}getCheckboxOptions(){return this.http.get(`${this.apiUrl}/checkbox-options`).pipe((0,N.W)(this.handleError("getCheckboxOptions",[])))}saveLead(i){return this.http.post(`${this.apiUrl}/leads`,i,{headers:new z.Lr({"Content-Type":"application/json"})}).pipe((0,N.W)(this.handleError("saveLead")))}getLeads(){return this.http.get(`${this.apiUrl}/getleads`)}getUsers(){return this.http.get(`${this.apiUrl}/get_users`)}handleError(i="operation",d){return o=>(console.error(`${i} failed: ${o.message}`),(0,V.of)(d))}getServiceTypeOptions(){return this.http.get(`${this.apiUrl}/getservicetypes`)}getIndustryTypeOptions(){return this.http.get(`${this.apiUrl}/get_industryType`)}saveFollowUp(i){return this.http.post(`${this.apiUrl}/saveFollowUp`,i)}getFollowUps(i){return this.http.get(`${this.apiUrl}/get_followups?lead_id=${i}`)}static{this.\u0275fac=function(d){return new(d||a)(e.KVO(z.Qq))}}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();function te(a,h){if(1&a){const i=e.RV6();e.j41(0,"div",46)(1,"input",47),e.bIt("change",function(o){e.eBV(i);const l=e.XpG();return e.Njj(l.onCheckboxChange(o))}),e.k0s(),e.j41(2,"label",48),e.EFF(3),e.k0s()()}if(2&a){const i=h.$implicit,d=e.XpG();e.R7$(),e.Y8G("value",i.id)("checked",d.lead.selectedCheckboxes.includes(i.id)),e.R7$(2),e.JRh(i.option_name)}}function X(a,h){1&a&&(e.j41(0,"div",49),e.EFF(1," Name is required "),e.k0s())}function I(a,h){1&a&&(e.j41(0,"div",49),e.EFF(1," A valid mobile number is required "),e.k0s())}function ue(a,h){1&a&&(e.j41(0,"div",49),e.EFF(1," A valid email is required "),e.k0s())}function j(a,h){1&a&&(e.j41(0,"div",49),e.EFF(1," City is required "),e.k0s())}function pe(a,h){if(1&a&&(e.j41(0,"option",50),e.EFF(1),e.k0s()),2&a){const i=h.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",i.servicename," ")}}function we(a,h){if(1&a&&(e.j41(0,"option",50),e.EFF(1),e.k0s()),2&a){const i=h.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",i.industryname," ")}}function x(a,h){if(1&a){const i=e.RV6();e.j41(0,"div",51)(1,"div",11)(2,"label",52),e.EFF(3,"Preferred Date"),e.k0s(),e.j41(4,"input",53),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.lead.preferred_date,o)||(l.lead.preferred_date=o),e.Njj(o)}),e.k0s()(),e.j41(5,"div",11)(6,"label",54),e.EFF(7,"Preferred Time Slot"),e.k0s(),e.j41(8,"select",55),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.lead.preferred_time_slot,o)||(l.lead.preferred_time_slot=o),e.Njj(o)}),e.j41(9,"option",23),e.EFF(10,"Select Time Slot"),e.k0s(),e.j41(11,"option",56),e.EFF(12,"10:00am - 11:00am"),e.k0s(),e.j41(13,"option",57),e.EFF(14,"11:00am - 12:00pm"),e.k0s(),e.j41(15,"option",58),e.EFF(16,"12:00pm - 1:00pm"),e.k0s(),e.j41(17,"option",59),e.EFF(18,"1:00pm - 2:00pm"),e.k0s(),e.j41(19,"option",60),e.EFF(20,"3:00pm - 4:00pm"),e.k0s(),e.j41(21,"option",61),e.EFF(22,"4:00pm - 5:00pm"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(4),e.R50("ngModel",i.lead.preferred_date),e.R7$(4),e.R50("ngModel",i.lead.preferred_time_slot)}}function ne(a,h){if(1&a&&(e.j41(0,"div",62)(1,"p"),e.EFF(2),e.k0s()()),2&a){const i=e.XpG();e.R7$(),e.AVh("success-message",!i.isSubmitting)("error-message",i.isSubmitting),e.R7$(),e.SpI(" ",i.submissionMessage," ")}}function ie(a,h){1&a&&(e.qex(0),e.EFF(1," Submit "),e.bVm())}function he(a,h){1&a&&(e.j41(0,"span",63),e.qSk(),e.j41(1,"svg",64),e.nrm(2,"circle",65)(3,"path",66),e.k0s(),e.EFF(4," Submitting... "),e.k0s())}let B=(()=>{class a{constructor(i){this.apiService=i,this.lead={name:"",assigned_to:"",mobile_number:"",email:"",city:"",service_type:"",industry_type:"",contact_preference:"",preferred_date:"",preferred_time_slot:"",requirements:"",lead_source:"",selectedCheckboxes:[]},this.isOpen=!0,this.isSubmitting=!1,this.checkboxOptions=[]}ngOnInit(){this.loadCheckboxOptions(),this.loadServiceTypeOptions(),this.loadIndustryTypeOptions()}loadServiceTypeOptions(){this.apiService.getServiceTypeOptions().subscribe(i=>{this.serviceTypeOptions=i,console.log(this.serviceTypeOptions)},i=>{console.error("Error fetching service type options:",i)})}loadIndustryTypeOptions(){this.apiService.getIndustryTypeOptions().subscribe(i=>{this.industryTypeOptions=i,console.log(this.industryTypeOptions)},i=>{console.error("Error fetching industry type options:",i)})}loadCheckboxOptions(){this.apiService.getCheckboxOptions().subscribe(i=>{this.checkboxOptions=i},i=>{console.error("Error fetching checkbox options",i)})}onCheckboxChange(i){const d=Number(i.target.value);if(i.target.checked)this.lead.selectedCheckboxes.push(d);else{const o=this.lead.selectedCheckboxes.indexOf(d);o>-1&&this.lead.selectedCheckboxes.splice(o,1)}}onSubmit(i){i.valid&&!this.isSubmitting&&(this.isSubmitting=!0,this.submissionMessage="","video"!==this.lead.contact_preference&&(this.lead.preferred_date="-",this.lead.preferred_time_slot="-"),this.lead.assigned_to="1",console.log("Form Submitted",this.lead),this.apiService.saveLead(this.lead).subscribe(d=>{console.log("Lead saved successfully:",d),d.status?(alert("Lead saved successfully"),this.submissionMessage="Lead saved successfully!!",i.reset()):this.submissionMessage="Failed to save lead: "+d.message,this.isSubmitting=!1},d=>{console.error("Error saving lead:",d),this.submissionMessage="There was an error submitting the form. Please try again.",this.isSubmitting=!1}))}confirmLogout(){confirm("Are you sure you want to logout?")&&this.logout()}logout(){localStorage.clear(),window.location.href="/login"}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(G))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-new-leads"]],standalone:!0,features:[e.aNF],decls:89,vars:21,consts:[["leadForm","ngForm"],["loading",""],[1,"p-6","space-y-6"],[1,"text-3xl","font-bold","mb-6","text-center"],[1,"bg-white","shadow-md","rounded-lg","p-8",3,"ngSubmit"],[1,"mb-6","p-6","bg-blue-50","border-l-4","border-blue-500","rounded-lg","shadow-lg"],[1,"text-lg","font-semibold","text-gray-800","italic"],[1,"form-group","mb-6"],[1,"text-lg","font-semibold","text-gray-700"],["class","mb-2",4,"ngFor","ngForOf"],[1,"grid","grid-cols-2","gap-4"],[1,"form-group","mb-4"],["for","name",1,"block","text-sm","font-medium","text-gray-700"],["id","name","name","name","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["class","text-red-600 text-sm mt-1",4,"ngIf"],["for","mobile_number",1,"block","text-sm","font-medium","text-gray-700"],["id","mobile_number","name","mobile_number","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],["id","email","name","email","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["for","city",1,"block","text-sm","font-medium","text-gray-700"],["id","city","name","city","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["for","service_type",1,"block","text-sm","font-medium","text-gray-700"],["id","service_type","name","service_type","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","lead_source",1,"block","text-sm","font-medium","text-gray-700"],["id","lead_source","name","lead_source","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["value","website"],["value","referral"],["value","social_media"],["value","event"],["value","cold_call"],["value","email_campaign"],["for","industry_type",1,"block","text-sm","font-medium","text-gray-700"],["id","industry_type","name","industry_type","required","",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["for","contact_preference",1,"block","text-sm","font-medium","text-gray-700"],["id","contact_preference","name","contact_preference",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["value","phone"],["value","video"],["class","video_contact_div grid grid-cols-2 gap-4",4,"ngIf"],[1,"grid","grid-cols-1","gap-4"],["for","requirements",1,"block","text-sm","font-medium","text-gray-700"],["id","requirements","name","requirements","rows","3",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["class","mt-4 text-sm",4,"ngIf"],["type","submit",1,"btn","btn-primary","mt-3","w-full","text-white","bg-blue-600","hover:bg-blue-700","rounded-lg","shadow-md","transition","duration-200","ease-in-out",3,"click","disabled"],[4,"ngIf","ngIfElse"],[1,"mb-2"],["type","checkbox",3,"change","value","checked"],[1,"ml-2","text-sm","text-gray-600"],[1,"text-red-600","text-sm","mt-1"],[3,"value"],[1,"video_contact_div","grid","grid-cols-2","gap-4"],["for","preferred_date",1,"block","text-sm","font-medium","text-gray-700"],["type","date","id","preferred_date","name","preferred_date",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["for","preferred_time_slot",1,"block","text-sm","font-medium","text-gray-700"],["id","preferred_time_slot","name","preferred_time_slot",1,"mt-1","block","w-full","border","border-gray-300","rounded-md","shadow-sm","focus:ring-blue-500","focus:border-blue-500","p-2",3,"ngModelChange","ngModel"],["value","10:00am - 11:00am"],["value","11:00am - 12:00pm"],["value","12:00pm - 1:00pm"],["value","1:00pm - 2:00pm"],["value","3:00pm - 4:00pm"],["value","4:00pm - 5:00pm"],[1,"mt-4","text-sm"],[1,"flex","justify-center","items-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"animate-spin","h-5","w-5","mr-3","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-opacity","0.25"],["d","M4 12a8 8 0 0 1 8-8v3a5 5 0 0 0 5 5h3a8 8 0 0 1-8 8v-3a5 5 0 0 0-5-5h-3a8 8 0 0 1 8-8","fill","none"]],template:function(d,o){if(1&d){const l=e.RV6();e.j41(0,"div",2)(1,"h1",3),e.EFF(2,"Add new lead"),e.k0s(),e.j41(3,"form",4,0),e.bIt("ngSubmit",function(){e.eBV(l);const p=e.sdS(4);return e.Njj(o.onSubmit(p))}),e.j41(5,"div",5)(6,"p",6),e.EFF(7,' "Adding leads: the only time when being persistent is actually encouraged!" '),e.k0s()(),e.j41(8,"fieldset",7)(9,"legend",8),e.EFF(10,"Choose the relevant options for the lead "),e.k0s(),e.DNE(11,te,4,3,"div",9),e.k0s(),e.j41(12,"div",10)(13,"div",11)(14,"label",12),e.EFF(15,"Full Name"),e.k0s(),e.j41(16,"input",13),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.name,p)||(o.lead.name=p),e.Njj(p)}),e.k0s(),e.DNE(17,X,2,0,"div",14),e.k0s(),e.j41(18,"div",11)(19,"label",15),e.EFF(20,"Mobile Number"),e.k0s(),e.j41(21,"input",16),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.mobile_number,p)||(o.lead.mobile_number=p),e.Njj(p)}),e.k0s(),e.DNE(22,I,2,0,"div",14),e.k0s()(),e.j41(23,"div",10)(24,"div",11)(25,"label",17),e.EFF(26,"Email"),e.k0s(),e.j41(27,"input",18),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.email,p)||(o.lead.email=p),e.Njj(p)}),e.k0s(),e.DNE(28,ue,2,0,"div",14),e.k0s(),e.j41(29,"div",11)(30,"label",19),e.EFF(31,"City"),e.k0s(),e.j41(32,"input",20),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.city,p)||(o.lead.city=p),e.Njj(p)}),e.k0s(),e.DNE(33,j,2,0,"div",14),e.k0s()(),e.j41(34,"div",10)(35,"div",11)(36,"label",21),e.EFF(37,"Service Type"),e.k0s(),e.j41(38,"select",22),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.service_type,p)||(o.lead.service_type=p),e.Njj(p)}),e.j41(39,"option",23),e.EFF(40,"Select Service Type"),e.k0s(),e.DNE(41,pe,2,2,"option",24),e.k0s()(),e.j41(42,"div",11)(43,"label",25),e.EFF(44,"Lead Source"),e.k0s(),e.j41(45,"select",26),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.lead_source,p)||(o.lead.lead_source=p),e.Njj(p)}),e.j41(46,"option",23),e.EFF(47,"Select Lead Source"),e.k0s(),e.j41(48,"option",27),e.EFF(49,"Website"),e.k0s(),e.j41(50,"option",28),e.EFF(51,"Referral"),e.k0s(),e.j41(52,"option",29),e.EFF(53,"Social Media"),e.k0s(),e.j41(54,"option",30),e.EFF(55,"Event"),e.k0s(),e.j41(56,"option",31),e.EFF(57,"Cold Call"),e.k0s(),e.j41(58,"option",32),e.EFF(59,"Email Campaign"),e.k0s()()()(),e.j41(60,"div",10)(61,"div",11)(62,"label",33),e.EFF(63,"Industry Type"),e.k0s(),e.j41(64,"select",34),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.industry_type,p)||(o.lead.industry_type=p),e.Njj(p)}),e.j41(65,"option",23),e.EFF(66,"Select industry Type"),e.k0s(),e.DNE(67,we,2,2,"option",24),e.k0s()(),e.j41(68,"div",11)(69,"label",35),e.EFF(70,"Preferred Contact Method"),e.k0s(),e.j41(71,"select",36),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.contact_preference,p)||(o.lead.contact_preference=p),e.Njj(p)}),e.j41(72,"option",23),e.EFF(73,"Select Preferred Contact Method"),e.k0s(),e.j41(74,"option",37),e.EFF(75,"Phone Call"),e.k0s(),e.j41(76,"option",38),e.EFF(77,"Video Call"),e.k0s()()()(),e.DNE(78,x,23,2,"div",39),e.j41(79,"div",40)(80,"div",11)(81,"label",41),e.EFF(82,"Additional Requirements"),e.k0s(),e.j41(83,"textarea",42),e.mxI("ngModelChange",function(p){return e.eBV(l),e.DH7(o.lead.requirements,p)||(o.lead.requirements=p),e.Njj(p)}),e.k0s()()(),e.DNE(84,ne,3,5,"div",43),e.j41(85,"button",44),e.bIt("click",function(){e.eBV(l);const p=e.sdS(4);return e.Njj(o.onSubmit(p))}),e.DNE(86,ie,2,0,"ng-container",45)(87,he,5,0,"ng-template",null,1,e.C5r),e.k0s()()()}if(2&d){const l=e.sdS(4),f=e.sdS(88);e.R7$(11),e.Y8G("ngForOf",o.checkboxOptions),e.R7$(5),e.R50("ngModel",o.lead.name),e.R7$(),e.Y8G("ngIf",(null==l.controls.name?null:l.controls.name.invalid)&&(null==l.controls.name?null:l.controls.name.touched)),e.R7$(4),e.R50("ngModel",o.lead.mobile_number),e.R7$(),e.Y8G("ngIf",(null==l.controls.mobile_number?null:l.controls.mobile_number.invalid)&&(null==l.controls.mobile_number?null:l.controls.mobile_number.touched)),e.R7$(5),e.R50("ngModel",o.lead.email),e.R7$(),e.Y8G("ngIf",(null==l.controls.email?null:l.controls.email.invalid)&&(null==l.controls.email?null:l.controls.email.touched)),e.R7$(4),e.R50("ngModel",o.lead.city),e.R7$(),e.Y8G("ngIf",(null==l.controls.city?null:l.controls.city.invalid)&&(null==l.controls.city?null:l.controls.city.touched)),e.R7$(5),e.R50("ngModel",o.lead.service_type),e.R7$(3),e.Y8G("ngForOf",o.serviceTypeOptions),e.R7$(4),e.R50("ngModel",o.lead.lead_source),e.R7$(19),e.R50("ngModel",o.lead.industry_type),e.R7$(3),e.Y8G("ngForOf",o.industryTypeOptions),e.R7$(4),e.R50("ngModel",o.lead.contact_preference),e.R7$(7),e.Y8G("ngIf","video"===o.lead.contact_preference),e.R7$(5),e.R50("ngModel",o.lead.requirements),e.R7$(),e.Y8G("ngIf",o.submissionMessage),e.R7$(),e.Y8G("disabled",l.invalid||o.isSubmitting),e.R7$(),e.Y8G("ngIf",!o.isSubmitting)("ngIfElse",f)}},dependencies:[F.MD,F.Sq,F.bT,m.YN,m.qT,m.xH,m.y7,m.me,m.wz,m.BC,m.cb,m.YS,m.vS,m.cV],styles:[".success-message[_ngcontent-%COMP%]{color:#38a169;font-weight:600;padding:10px;border:1px solid #38a169;border-radius:4px;background-color:#f0fff4;box-shadow:0 2px 4px #0000001a}.error-message[_ngcontent-%COMP%]{color:#e53e3e;font-weight:600;padding:10px;border:1px solid #e53e3e;border-radius:4px;background-color:#fff5f5;box-shadow:0 2px 4px #0000001a}"]})}}return a})();var S=k(2796);const me=(a,h,i)=>({"bg-green-500":a,"bg-yellow-500":h,"bg-red-500":i});function O(a,h){if(1&a){const i=e.RV6();e.j41(0,"tr",13)(1,"td",14),e.EFF(2),e.k0s(),e.j41(3,"td",14)(4,"span",15),e.EFF(5),e.k0s(),e.j41(6,"span",16),e.EFF(7),e.k0s(),e.j41(8,"span",17),e.EFF(9),e.k0s()(),e.j41(10,"td",14),e.EFF(11),e.k0s(),e.j41(12,"td",14),e.EFF(13),e.k0s(),e.j41(14,"td",14),e.EFF(15),e.k0s(),e.j41(16,"td",14),e.EFF(17),e.k0s(),e.j41(18,"td",14),e.EFF(19),e.k0s(),e.j41(20,"td",14)(21,"button",18),e.bIt("click",function(){const o=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.openFollowUpListPage(o))}),e.EFF(22),e.k0s()(),e.j41(23,"td",14)(24,"span",19),e.EFF(25),e.k0s()(),e.j41(26,"td",14),e.EFF(27),e.k0s(),e.j41(28,"td",14),e.EFF(29),e.k0s(),e.j41(30,"td",14)(31,"button",20),e.bIt("click",function(){const o=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.openEditModal(o))}),e.nrm(32,"i",21),e.EFF(33," Edit "),e.k0s(),e.j41(34,"button",22),e.bIt("click",function(){const o=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.openFollowUpModal(o))}),e.nrm(35,"i",23),e.EFF(36," Follow-up "),e.k0s()()()}if(2&a){const i=h.$implicit,d=h.index,o=e.XpG();e.R7$(2),e.SpI("",(o.paginationInstance.currentPage-1)*o.paginationInstance.itemsPerPage+d+1," "),e.R7$(3),e.JRh(i.name),e.R7$(2),e.JRh(i.mobile_number),e.R7$(2),e.JRh(i.email),e.R7$(2),e.JRh(i.city),e.R7$(2),e.JRh(i.lead_source),e.R7$(2),e.JRh(i.website_type),e.R7$(2),e.JRh(i.industry_type),e.R7$(2),e.JRh(i.contact_preference),e.R7$(3),e.SpI(" ",i.followUpCount," "),e.R7$(2),e.Y8G("ngClass",e.sMw(14,me,"Converted"===i.status,"Pending"===i.status,"Lost"===i.status)),e.R7$(),e.SpI(" ",i.status," "),e.R7$(2),e.JRh(i.assigned_to),e.R7$(2),e.JRh(i.updated_at)}}function J(a,h){1&a&&(e.j41(0,"div",24),e.EFF(1," Loading... "),e.k0s())}function Y(a,h){1&a&&(e.j41(0,"div",24),e.EFF(1," No leads found. "),e.k0s())}function Z(a,h){if(1&a&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&a){const i=h.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",i.servicename," ")}}function ge(a,h){if(1&a&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&a){const i=h.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",i.industryname," ")}}function Q(a,h){if(1&a){const i=e.RV6();e.j41(0,"div",25)(1,"div",26)(2,"h2",27),e.EFF(3,"Edit Lead"),e.k0s(),e.j41(4,"form",28),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.updateLead())}),e.j41(5,"label",29),e.EFF(6,"Name"),e.k0s(),e.j41(7,"input",30),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.name,o)||(l.selectedLead.name=o),e.Njj(o)}),e.k0s(),e.j41(8,"label",29),e.EFF(9,"Mobile Number"),e.k0s(),e.j41(10,"input",31),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.mobile_number,o)||(l.selectedLead.mobile_number=o),e.Njj(o)}),e.k0s(),e.j41(11,"label",29),e.EFF(12,"Email"),e.k0s(),e.j41(13,"input",32),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.email,o)||(l.selectedLead.email=o),e.Njj(o)}),e.k0s(),e.j41(14,"label",29),e.EFF(15,"City"),e.k0s(),e.j41(16,"input",33),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.city,o)||(l.selectedLead.city=o),e.Njj(o)}),e.k0s(),e.j41(17,"label",29),e.EFF(18,"Lead Source"),e.k0s(),e.j41(19,"select",34),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.lead_source,o)||(l.selectedLead.lead_source=o),e.Njj(o)}),e.j41(20,"option",35),e.EFF(21,"Select Lead Source"),e.k0s(),e.j41(22,"option",36),e.EFF(23,"Website"),e.k0s(),e.j41(24,"option",37),e.EFF(25,"Referral"),e.k0s(),e.j41(26,"option",38),e.EFF(27,"Social Media"),e.k0s(),e.j41(28,"option",39),e.EFF(29,"Event"),e.k0s(),e.j41(30,"option",40),e.EFF(31,"Cold Call"),e.k0s(),e.j41(32,"option",41),e.EFF(33,"Email Campaign"),e.k0s()(),e.j41(34,"label",29),e.EFF(35,"Service Type"),e.k0s(),e.j41(36,"select",42),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.website_type_id,o)||(l.selectedLead.website_type_id=o),e.Njj(o)}),e.j41(37,"option",35),e.EFF(38,"Select Service Type"),e.k0s(),e.DNE(39,Z,2,2,"option",43),e.k0s(),e.j41(40,"label",29),e.EFF(41,"Industry Type"),e.k0s(),e.j41(42,"select",44),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.industry_type_id,o)||(l.selectedLead.industry_type_id=o),e.Njj(o)}),e.j41(43,"option",35),e.EFF(44,"Select industry Type"),e.k0s(),e.DNE(45,ge,2,2,"option",43),e.k0s(),e.j41(46,"label",29),e.EFF(47,"Contact Preference"),e.k0s(),e.j41(48,"input",45),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.contact_preference,o)||(l.selectedLead.contact_preference=o),e.Njj(o)}),e.k0s(),e.j41(49,"label",29),e.EFF(50,"Status"),e.k0s(),e.j41(51,"select",46),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.selectedLead.status,o)||(l.selectedLead.status=o),e.Njj(o)}),e.j41(52,"option",47),e.EFF(53,"Converted"),e.k0s(),e.j41(54,"option",48),e.EFF(55,"Pending"),e.k0s(),e.j41(56,"option",49),e.EFF(57,"Lost"),e.k0s()(),e.j41(58,"button",50),e.EFF(59,"Save"),e.k0s(),e.j41(60,"button",51),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.closeEditModal())}),e.EFF(61,"Cancel"),e.k0s()()()()}if(2&a){const i=e.XpG();e.R7$(7),e.R50("ngModel",i.selectedLead.name),e.R7$(3),e.R50("ngModel",i.selectedLead.mobile_number),e.R7$(3),e.R50("ngModel",i.selectedLead.email),e.R7$(3),e.R50("ngModel",i.selectedLead.city),e.R7$(3),e.R50("ngModel",i.selectedLead.lead_source),e.R7$(17),e.R50("ngModel",i.selectedLead.website_type_id),e.R7$(3),e.Y8G("ngForOf",i.serviceTypeOptions),e.R7$(3),e.R50("ngModel",i.selectedLead.industry_type_id),e.R7$(3),e.Y8G("ngForOf",i.industryTypeOptions),e.R7$(3),e.R50("ngModel",i.selectedLead.contact_preference),e.R7$(3),e.R50("ngModel",i.selectedLead.status)}}function Me(a,h){if(1&a&&(e.j41(0,"option",52),e.EFF(1),e.k0s()),2&a){const i=h.$implicit;e.Y8G("value",i.id),e.R7$(),e.SpI(" ",i.username," ")}}function Ie(a,h){if(1&a){const i=e.RV6();e.j41(0,"div",25)(1,"div",26)(2,"h2",53),e.EFF(3,"Follow-Up"),e.k0s(),e.j41(4,"blockquote",54),e.EFF(5,' "A good follow-up is like a good cup of coffee: it keeps the conversation brewing!" '),e.k0s(),e.j41(6,"form",28),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.saveFollowUp())}),e.j41(7,"div",55)(8,"label",56),e.EFF(9,"Conversation Description:"),e.k0s(),e.j41(10,"textarea",57),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.followUpDescription,o)||(l.followUpDescription=o),e.Njj(o)}),e.k0s()(),e.j41(11,"div",55)(12,"label",58),e.EFF(13,"Follow-Up Medium:"),e.k0s(),e.j41(14,"select",59),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.followUpMedium,o)||(l.followUpMedium=o),e.Njj(o)}),e.j41(15,"option",60),e.EFF(16,"Select..."),e.k0s(),e.j41(17,"option",61),e.EFF(18,"Email"),e.k0s(),e.j41(19,"option",62),e.EFF(20,"Phone Call"),e.k0s(),e.j41(21,"option",63),e.EFF(22,"Meeting"),e.k0s(),e.j41(23,"option",64),e.EFF(24,"Text Message"),e.k0s()()(),e.j41(25,"div",55)(26,"label",65),e.EFF(27,"Follow-Up Date & Time:"),e.k0s(),e.j41(28,"input",66),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.followUpDateTime,o)||(l.followUpDateTime=o),e.Njj(o)}),e.k0s()(),e.j41(29,"div",55)(30,"label",67),e.EFF(31,"Follow-Up Attended By:"),e.k0s(),e.j41(32,"select",68),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.attendedBy,o)||(l.attendedBy=o),e.Njj(o)}),e.j41(33,"option",60),e.EFF(34,"Select User..."),e.k0s(),e.DNE(35,Me,2,2,"option",43),e.k0s()(),e.j41(36,"div",69)(37,"button",70),e.EFF(38,"Save Follow-Up"),e.k0s(),e.j41(39,"button",71),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.closeFollowUpModal())}),e.EFF(40,"Cancel"),e.k0s()()()()()}if(2&a){const i=e.XpG();e.R7$(10),e.R50("ngModel",i.followUpDescription),e.R7$(4),e.R50("ngModel",i.followUpMedium),e.R7$(14),e.R50("ngModel",i.followUpDateTime),e.R7$(4),e.R50("ngModel",i.attendedBy),e.R7$(3),e.Y8G("ngForOf",i.users)}}let se=(()=>{class a{constructor(i,d,o){this.leadService=i,this.paginationService=d,this.apiService=o,this.isOpen=!0,this.leads=[],this.filteredLeads=[],this.searchTerm="",this.currentPage=1,this.itemsPerPage=10,this.paginationInstance={id:"custom-pagination",currentPage:this.currentPage,itemsPerPage:this.itemsPerPage},this.isLoading=!1,this.users=[],this.selectedLead=null,this.isEditModalOpen=!1,this.followUpDescription="",this.followUpMedium="",this.followUpDateTime="",this.attendedBy="",this.isFollowUpModalOpen=!1}ngOnInit(){this.loadLeads(),this.loadUsers(),this.paginationService.register(this.paginationInstance),this.loadServiceTypeOptions(),this.loadIndustryTypeOptions()}loadUsers(){this.apiService.getUsers().subscribe(i=>{i.status?this.users=i.data:console.error("Failed to fetch users:")},i=>{console.error("Error fetching users:",i)})}loadLeads(){this.isLoading=!0,this.leadService.getLeads().subscribe(i=>{i.status?(this.leads=i.data,this.filteredLeads=this.leads.map(d=>({...d,website_type:d.website_type||"N/A",industry_type:d.industry_type||"N/A"})),console.log("Leads data:",this.leads)):console.error("Failed to fetch leads: Invalid response status"),this.isLoading=!1},i=>{console.error("Error fetching leads:",i),this.isLoading=!1})}filterLeads(){this.filteredLeads=this.searchTerm?this.leads.filter(i=>i.name.toLowerCase().includes(this.searchTerm.toLowerCase())||i.email.toLowerCase().includes(this.searchTerm.toLowerCase())):this.leads}onPageChange(i){this.currentPage=i,this.paginationInstance.currentPage=i}openEditModal(i){this.selectedLead={...i},this.isEditModalOpen=!0}closeEditModal(){this.isEditModalOpen=!1,this.selectedLead=null}updateLead(){console.log("Updated Lead:",this.selectedLead),this.closeEditModal()}openFollowUpModal(i){this.selectedLead=i,this.isFollowUpModalOpen=!0,this.resetFollowUpForm()}closeFollowUpModal(){this.isFollowUpModalOpen=!1,this.selectedLead=null}resetFollowUpForm(){this.followUpDescription="",this.followUpMedium="",this.followUpDateTime="",this.attendedBy=""}saveFollowUp(){this.apiService.saveFollowUp({lead_id:this.selectedLead?.id,description:this.followUpDescription,medium:this.followUpMedium,followup_date:this.followUpDateTime,attended_by:this.attendedBy}).subscribe(d=>{console.log("Follow-Up saved successfully:",d),this.closeFollowUpModal(),alert("Follow-up added successfully"),this.loadLeads(),this.loadUsers(),this.paginationService.register(this.paginationInstance),this.loadServiceTypeOptions(),this.loadIndustryTypeOptions()},d=>{console.error("Error saving follow-up:",d)})}loadIndustryTypeOptions(){this.apiService.getIndustryTypeOptions().subscribe(i=>{this.industryTypeOptions=i,console.log(this.industryTypeOptions)},i=>{console.error("Error fetching industry type options:",i)})}loadServiceTypeOptions(){this.apiService.getServiceTypeOptions().subscribe(i=>{this.serviceTypeOptions=i,console.log(this.serviceTypeOptions)},i=>{console.error("Error fetching service type options:",i)})}openFollowUpListPage(i){window.open(`https://ek-reps.com/ekarigar_leads/followUps?leadId=${i.id}`,"_blank")}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(G),e.rXU(S.mc),e.rXU(G))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-all-leads"]],standalone:!0,features:[e.aNF],decls:41,vars:10,consts:[[1,"container","mx-auto","py-8"],[1,"text-3xl","font-bold","mb-6","text-center"],[1,"mb-4"],["type","text","placeholder","Search by name or email...",1,"border","border-gray-300","rounded-lg","p-2","w-full",3,"ngModelChange","ngModel"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","border","border-gray-300","rounded-lg","shadow-md"],[1,"bg-gray-200","text-gray-600","uppercase","text-sm","leading-normal"],[1,"py-3","px-4","text-left"],[1,"text-gray-600","text-sm","font-light"],["class","border-b hover:bg-gray-100 transition duration-300 ease-in-out",4,"ngFor","ngForOf"],[3,"pageChange","id"],["class","text-center mt-4",4,"ngIf"],["class","fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",4,"ngIf"],[1,"border-b","hover:bg-gray-100","transition","duration-300","ease-in-out"],[1,"py-3","px-4"],[1,"bg-blue-100","text-blue-800","px-2","py-1","rounded","block"],[1,"bg-green-100","text-green-800","px-2","py-1","rounded","block","mt-2"],[1,"bg-yellow-100","text-yellow-800","px-2","py-1","rounded","block","mt-2"],[1,"bg-green-500","text-white","px-4","py-2","rounded-lg","hover:bg-green-600","transition","duration-200",3,"click"],[1,"text-white","rounded-full","px-3","py-1","text-xs","font-semibold",3,"ngClass"],[1,"bg-blue-500","text-white","hover:bg-blue-600","font-semibold","px-4","py-2","rounded-lg","transition","duration-200","w-full",3,"click"],[1,"fas","fa-edit","mr-2"],[1,"bg-green-500","text-white","hover:bg-green-600","font-semibold","px-4","py-2","rounded-lg","transition","duration-200","w-full","mt-2",3,"click"],[1,"fas","fa-plus","mr-2"],[1,"text-center","mt-4"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-50"],[1,"bg-white","p-6","rounded-lg","shadow-lg","w-1/3"],[1,"text-xl","font-bold","mb-4"],[3,"ngSubmit"],[1,"block","mb-2"],["name","name","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["name","mobile_number","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["name","email","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["name","city","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["id","lead_source","name","lead_source","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["value","","disabled",""],["value","website"],["value","referral"],["value","social_media"],["value","event"],["value","cold_call"],["value","email_campaign"],["id","service_type","name","service_type","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["id","industry_type","name","industry_type","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["name","contact_preference","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["name","status","required","",1,"border","border-gray-300","p-2","w-full","mb-4",3,"ngModelChange","ngModel"],["value","Converted"],["value","Pending"],["value","Lost"],["type","submit",1,"bg-blue-500","text-white","px-4","py-2","rounded-lg"],["type","button",1,"bg-gray-500","text-white","px-4","py-2","rounded-lg","ml-2",3,"click"],[3,"value"],[1,"text-xl","font-bold","mb-4","text-center"],[1,"border-l-4","border-blue-500","pl-4","italic","text-gray-600","mb-4"],[1,"form-group","mb-4"],["for","conversation-description",1,"block","font-semibold","mb-1"],["id","conversation-description","name","conversation_description","required","",1,"form-control","border","border-gray-300","rounded-lg","p-2","w-full",3,"ngModelChange","ngModel"],["for","follow-up-medium",1,"block","font-semibold","mb-1"],["id","follow-up-medium","name","follow_up_medium","required","",1,"form-control","border","border-gray-300","rounded-lg","p-2","w-full",3,"ngModelChange","ngModel"],["value",""],["value","email"],["value","phone_call"],["value","meeting"],["value","text_message"],["for","follow-up-datetime",1,"block","font-semibold","mb-1"],["type","datetime-local","id","follow-up-datetime","name","follow_up_datetime","required","",1,"form-control","border","border-gray-300","rounded-lg","p-2","w-full",3,"ngModelChange","ngModel"],["for","attended-by",1,"block","font-semibold","mb-1"],["id","attended-by","name","attended_by","required","",1,"form-control","border","border-gray-300","rounded-lg","p-2","w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-end"],["type","submit",1,"bg-blue-500","text-white","px-4","py-2","rounded-lg","hover:bg-blue-600","transition","duration-200"],["type","button",1,"bg-gray-500","text-white","px-4","py-2","rounded-lg","ml-2","hover:bg-gray-600","transition","duration-200",3,"click"]],template:function(d,o){1&d&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"All Leads"),e.k0s(),e.j41(3,"div",2)(4,"input",3),e.mxI("ngModelChange",function(f){return e.DH7(o.searchTerm,f)||(o.searchTerm=f),f}),e.bIt("ngModelChange",function(){return o.filterLeads()}),e.k0s()(),e.j41(5,"div",4)(6,"table",5)(7,"thead")(8,"tr",6)(9,"th",7),e.EFF(10,"#"),e.k0s(),e.j41(11,"th",7),e.EFF(12,"Contact Info."),e.k0s(),e.j41(13,"th",7),e.EFF(14,"City"),e.k0s(),e.j41(15,"th",7),e.EFF(16,"Lead Source"),e.k0s(),e.j41(17,"th",7),e.EFF(18,"Service Type"),e.k0s(),e.j41(19,"th",7),e.EFF(20,"Industry Type"),e.k0s(),e.j41(21,"th",7),e.EFF(22,"Contact Preference"),e.k0s(),e.j41(23,"th",7),e.EFF(24,"Follow-up Count"),e.k0s(),e.j41(25,"th",7),e.EFF(26,"Status"),e.k0s(),e.j41(27,"th",7),e.EFF(28,"Assigned to"),e.k0s(),e.j41(29,"th",7),e.EFF(30,"Updated At"),e.k0s(),e.j41(31,"th",7),e.EFF(32,"Actions"),e.k0s()()(),e.j41(33,"tbody",8),e.DNE(34,O,37,18,"tr",9),e.nI1(35,"paginate"),e.k0s()(),e.j41(36,"pagination-controls",10),e.bIt("pageChange",function(f){return o.onPageChange(f)}),e.k0s(),e.DNE(37,J,2,0,"div",11)(38,Y,2,0,"div",11),e.k0s(),e.DNE(39,Q,62,11,"div",12)(40,Ie,41,5,"div",12),e.k0s()),2&d&&(e.R7$(4),e.R50("ngModel",o.searchTerm),e.R7$(30),e.Y8G("ngForOf",e.i5U(35,7,o.filteredLeads,o.paginationInstance)),e.R7$(2),e.Y8G("id",o.paginationInstance.id||"default-id"),e.R7$(),e.Y8G("ngIf",o.isLoading),e.R7$(),e.Y8G("ngIf",!o.isLoading&&0===o.filteredLeads.length),e.R7$(),e.Y8G("ngIf",o.isEditModalOpen),e.R7$(),e.Y8G("ngIf",o.isFollowUpModalOpen))},dependencies:[F.MD,F.YU,F.Sq,F.bT,m.YN,m.qT,m.xH,m.y7,m.me,m.wz,m.BC,m.cb,m.YS,m.vS,m.cV,S.ed,S.kf,S.ej]})}}return a})();function Le(a,h){if(1&a&&(e.j41(0,"span",15),e.EFF(1),e.k0s()),2&a){const i=h.$implicit;e.R7$(),e.JRh(i)}}function fe(a,h){if(1&a&&(e.j41(0,"tr",9)(1,"td",10),e.EFF(2),e.k0s(),e.j41(3,"td",10),e.EFF(4),e.k0s(),e.j41(5,"td",10),e.DNE(6,Le,2,1,"span",11),e.k0s(),e.j41(7,"td",10),e.EFF(8),e.k0s(),e.j41(9,"td",10),e.EFF(10),e.k0s(),e.j41(11,"td",12)(12,"button",13),e.EFF(13,"Edit"),e.k0s(),e.j41(14,"button",14),e.EFF(15,"Delete"),e.k0s()()()),2&a){const i=h.$implicit;e.R7$(2),e.JRh(i.name),e.R7$(2),e.JRh(i.role),e.R7$(2),e.Y8G("ngForOf",i.permissions),e.R7$(2),e.SpI("",i.assignedLeads," Leads"),e.R7$(2),e.JRh(i.lastLogin)}}function Ne(a,h){if(1&a){const i=e.RV6();e.j41(0,"div",16)(1,"div",17)(2,"h2",18),e.EFF(3,"Add New User"),e.k0s(),e.j41(4,"form",19),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.onAddUser())}),e.j41(5,"div",20)(6,"label",21),e.EFF(7,"Name"),e.k0s(),e.j41(8,"input",22),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.newUser.name,o)||(l.newUser.name=o),e.Njj(o)}),e.k0s()(),e.j41(9,"div",20)(10,"label",21),e.EFF(11,"Email"),e.k0s(),e.j41(12,"input",23),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.newUser.email,o)||(l.newUser.email=o),e.Njj(o)}),e.k0s()(),e.j41(13,"div",20)(14,"label",21),e.EFF(15,"Role"),e.k0s(),e.j41(16,"select",24),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.newUser.role,o)||(l.newUser.role=o),e.Njj(o)}),e.j41(17,"option"),e.EFF(18,"Select role"),e.k0s(),e.j41(19,"option"),e.EFF(20,"Admin"),e.k0s(),e.j41(21,"option"),e.EFF(22,"Team Lead"),e.k0s(),e.j41(23,"option"),e.EFF(24,"Sales Manager"),e.k0s()()(),e.j41(25,"div",20)(26,"label",21),e.EFF(27,"Permissions"),e.k0s(),e.j41(28,"div",25)(29,"label",26)(30,"input",27),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.newUser.permissions.viewLeads,o)||(l.newUser.permissions.viewLeads=o),e.Njj(o)}),e.k0s(),e.j41(31,"span",28),e.EFF(32,"View Leads"),e.k0s()(),e.j41(33,"label",26)(34,"input",29),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.newUser.permissions.assignLeads,o)||(l.newUser.permissions.assignLeads=o),e.Njj(o)}),e.k0s(),e.j41(35,"span",28),e.EFF(36,"Assign Leads"),e.k0s()(),e.j41(37,"label",26)(38,"input",30),e.mxI("ngModelChange",function(o){e.eBV(i);const l=e.XpG();return e.DH7(l.newUser.permissions.editLeads,o)||(l.newUser.permissions.editLeads=o),e.Njj(o)}),e.k0s(),e.j41(39,"span",28),e.EFF(40,"Edit Leads"),e.k0s()()()(),e.j41(41,"div",31)(42,"button",32),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.closeAddUserModal())}),e.EFF(43,"Cancel"),e.k0s(),e.j41(44,"button",33),e.EFF(45,"Save"),e.k0s()()()()()}if(2&a){const i=e.XpG();e.R7$(8),e.R50("ngModel",i.newUser.name),e.R7$(4),e.R50("ngModel",i.newUser.email),e.R7$(4),e.R50("ngModel",i.newUser.role),e.R7$(14),e.R50("ngModel",i.newUser.permissions.viewLeads),e.R7$(4),e.R50("ngModel",i.newUser.permissions.assignLeads),e.R7$(4),e.R50("ngModel",i.newUser.permissions.editLeads)}}let _e=(()=>{class a{constructor(){this.users=[{name:"John Doe",role:"Team Lead",permissions:["View Leads","Edit Leads"],assignedLeads:15,lastLogin:"2 hours ago"},{name:"Jane Smith",role:"Sales Manager",permissions:["View Leads","Assign Leads"],assignedLeads:22,lastLogin:"Yesterday"}],this.showAddUserModal=!1,this.newUser={name:"",email:"",role:"",permissions:{viewLeads:!1,assignLeads:!1,editLeads:!1}}}openAddUserModal(){this.showAddUserModal=!0}closeAddUserModal(){this.showAddUserModal=!1}onAddUser(){const{permissions:i}=this.newUser,d=[];i.viewLeads&&d.push("View Leads"),i.assignLeads&&d.push("Assign Leads"),i.editLeads&&d.push("Edit Leads"),this.users.push({name:this.newUser.name,role:this.newUser.role,permissions:d,assignedLeads:0,lastLogin:"Never"}),this.newUser={name:"",email:"",role:"",permissions:{viewLeads:!1,assignLeads:!1,editLeads:!1}},this.closeAddUserModal()}static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-user-management"]],standalone:!0,features:[e.aNF],decls:23,vars:2,consts:[[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-700"],[1,"px-4","py-2","bg-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:bg-blue-500",3,"click"],[1,"min-w-full","bg-white","rounded-lg","shadow-md","overflow-hidden"],[1,"bg-gray-100"],[1,"px-6","py-3","text-left","text-sm","font-medium","text-gray-600"],[1,"px-6","py-3","text-right","text-sm","font-medium","text-gray-600"],["class","hover:bg-gray-50",4,"ngFor","ngForOf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",4,"ngIf"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","text-sm","text-gray-700"],["class","inline-block bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs mr-1",4,"ngFor","ngForOf"],[1,"px-6","py-4","text-right"],[1,"text-blue-500","hover:underline","text-sm","font-medium"],[1,"text-red-500","hover:underline","text-sm","font-medium","ml-4"],[1,"inline-block","bg-green-100","text-green-700","px-2","py-1","rounded-full","text-xs","mr-1"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"bg-white","rounded-lg","shadow-lg","max-w-md","w-full","p-6"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[3,"ngSubmit"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-600"],["type","text","placeholder","Enter user name","name","name","required","",1,"w-full","px-4","py-2","border","rounded-lg","text-sm",3,"ngModelChange","ngModel"],["type","email","placeholder","Enter user email","name","email","required","",1,"w-full","px-4","py-2","border","rounded-lg","text-sm",3,"ngModelChange","ngModel"],["name","role","required","",1,"w-full","px-4","py-2","border","rounded-lg","text-sm",3,"ngModelChange","ngModel"],[1,"flex","flex-wrap","gap-2","mt-2"],[1,"inline-flex","items-center"],["type","checkbox","name","viewLeads",1,"form-checkbox","text-blue-500",3,"ngModelChange","ngModel"],[1,"ml-2","text-sm"],["type","checkbox","name","assignLeads",1,"form-checkbox","text-blue-500",3,"ngModelChange","ngModel"],["type","checkbox","name","editLeads",1,"form-checkbox","text-blue-500",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-4","mt-4"],["type","button",1,"px-4","py-2","bg-gray-200","text-gray-600","rounded-lg",3,"click"],["type","submit",1,"px-4","py-2","bg-blue-600","text-white","rounded-lg"]],template:function(d,o){1&d&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"User Management"),e.k0s(),e.j41(3,"button",2),e.bIt("click",function(){return o.openAddUserModal()}),e.EFF(4," Add User "),e.k0s()(),e.j41(5,"table",3)(6,"thead")(7,"tr",4)(8,"th",5),e.EFF(9,"Name"),e.k0s(),e.j41(10,"th",5),e.EFF(11,"Role"),e.k0s(),e.j41(12,"th",5),e.EFF(13,"Permissions"),e.k0s(),e.j41(14,"th",5),e.EFF(15,"Assigned Leads"),e.k0s(),e.j41(16,"th",5),e.EFF(17,"Last Login"),e.k0s(),e.j41(18,"th",6),e.EFF(19,"Actions"),e.k0s()()(),e.j41(20,"tbody"),e.DNE(21,fe,16,5,"tr",7),e.k0s()(),e.DNE(22,Ne,46,6,"div",8)),2&d&&(e.R7$(21),e.Y8G("ngForOf",o.users),e.R7$(),e.Y8G("ngIf",o.showAddUserModal))},dependencies:[m.YN,m.qT,m.xH,m.y7,m.me,m.Zm,m.wz,m.BC,m.cb,m.YS,m.vS,m.cV,F.MD,F.Sq,F.bT]})}}return a})(),$=(()=>{class a{static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-notification-management"]],standalone:!0,features:[e.aNF],decls:46,vars:0,consts:[[1,"container","mx-auto","p-6","bg-gray-100","min-h-screen"],[1,"text-2xl","font-semibold","text-gray-800","mb-6"],[1,"bg-white","rounded-lg","shadow","p-6","mb-6"],[1,"text-xl","font-semibold","text-gray-700","mb-4"],[1,"w-full","text-left","border-collapse"],[1,"border-b"],[1,"px-6","py-2","text-gray-700"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","text-sm","text-gray-700"],["type","checkbox","checked","",1,"form-checkbox","text-blue-500"],["type","checkbox",1,"form-checkbox","text-blue-500"],[1,"bg-white","rounded-lg","shadow","p-6"],[1,"mb-4"],[1,"block","text-sm","font-medium","text-gray-600"],[1,"w-full","px-4","py-2","border","rounded-lg","text-sm"]],template:function(d,o){1&d&&(e.j41(0,"div",0)(1,"h1",1),e.EFF(2,"Notification Management"),e.k0s(),e.j41(3,"div",2)(4,"h2",3),e.EFF(5,"Users"),e.k0s(),e.j41(6,"table",4)(7,"thead")(8,"tr",5)(9,"th",6),e.EFF(10,"Name"),e.k0s(),e.j41(11,"th",6),e.EFF(12,"Role"),e.k0s(),e.j41(13,"th",6),e.EFF(14,"Notifications"),e.k0s()()(),e.j41(15,"tbody")(16,"tr",7)(17,"td",8),e.EFF(18,"John Doe"),e.k0s(),e.j41(19,"td",8),e.EFF(20,"Admin"),e.k0s(),e.j41(21,"td",8),e.nrm(22,"input",9),e.EFF(23," Enable Notifications "),e.k0s()(),e.j41(24,"tr",7)(25,"td",8),e.EFF(26,"Jane Smith"),e.k0s(),e.j41(27,"td",8),e.EFF(28,"Team Lead"),e.k0s(),e.j41(29,"td",8),e.nrm(30,"input",10),e.EFF(31," Enable Notifications "),e.k0s()()()()(),e.j41(32,"div",11)(33,"h2",3),e.EFF(34,"Notification Settings"),e.k0s(),e.j41(35,"form")(36,"div",12)(37,"label",13),e.EFF(38,"Notification Type"),e.k0s(),e.j41(39,"select",14)(40,"option"),e.EFF(41,"System Alerts"),e.k0s(),e.j41(42,"option"),e.EFF(43,"Promotions"),e.k0s(),e.j41(44,"option"),e.EFF(45,"Team Updates"),e.k0s()()()()()())}})}}return a})();function Se(a,h){if(1&a&&(e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13),e.qSk(),e.j41(4,"svg",14),e.nrm(5,"path",15),e.k0s(),e.EFF(6," Lead Person Name "),e.k0s(),e.joV(),e.j41(7,"h1",16),e.EFF(8),e.k0s(),e.j41(9,"div",17)(10,"div",18)(11,"span",19)(12,"div",19),e.qSk(),e.j41(13,"svg",14),e.nrm(14,"path",20),e.k0s(),e.joV(),e.j41(15,"span",21),e.EFF(16,"Mobile:"),e.k0s()(),e.EFF(17),e.k0s(),e.j41(18,"span",19)(19,"div",19),e.qSk(),e.j41(20,"svg",14),e.nrm(21,"path",22),e.k0s(),e.joV(),e.j41(22,"span",21),e.EFF(23,"Email:"),e.k0s()(),e.EFF(24),e.k0s()()()(),e.j41(25,"div",23)(26,"div",24),e.EFF(27,"Additional Details"),e.k0s(),e.j41(28,"div",25)(29,"div",26)(30,"span",27),e.EFF(31,"Website Type"),e.k0s(),e.j41(32,"span",28),e.EFF(33),e.k0s()(),e.j41(34,"div",26)(35,"span",27),e.EFF(36,"Industry"),e.k0s(),e.j41(37,"span",29),e.EFF(38),e.k0s()(),e.j41(39,"div",26)(40,"span",27),e.EFF(41,"City"),e.k0s(),e.j41(42,"span",30),e.EFF(43),e.k0s()()()()()()),2&a){const i=e.XpG();e.R7$(8),e.JRh(i.leadDetails.lead_name),e.R7$(9),e.SpI(" ",i.leadDetails.mobile_number," "),e.R7$(7),e.SpI(" ",i.leadDetails.lead_email," "),e.R7$(9),e.SpI(" ",i.leadDetails.website_type_name," "),e.R7$(5),e.SpI(" ",i.leadDetails.industry_type_name," "),e.R7$(5),e.SpI(" ",i.leadDetails.city," ")}}function oe(a,h){if(1&a&&(e.j41(0,"div",33)(1,"div",34)(2,"div",12)(3,"div",35)(4,"span",36),e.EFF(5),e.nI1(6,"titlecase"),e.k0s(),e.j41(7,"span",37),e.EFF(8),e.k0s()(),e.j41(9,"p",38),e.EFF(10),e.k0s(),e.j41(11,"div",39)(12,"span",40),e.qSk(),e.j41(13,"svg",14),e.nrm(14,"path",41),e.k0s(),e.EFF(15),e.nI1(16,"date"),e.k0s()()()()()),2&a){const i=h.$implicit,d=e.XpG(2);e.R7$(4),e.HbH(d.getMediumBadgeClass(i.medium)),e.R7$(),e.SpI(" ",e.bMT(6,6,i.medium)," "),e.R7$(3),e.SpI(" by ",i.attended_by_name," "),e.R7$(2),e.JRh(i.description),e.R7$(5),e.SpI(" ",e.i5U(16,8,i.followup_date,"MMM d, y, h:mm a")," ")}}function Re(a,h){if(1&a&&(e.j41(0,"div",31),e.DNE(1,oe,17,11,"div",32),e.k0s()),2&a){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.followUps)}}function Ue(a,h){1&a&&(e.j41(0,"div",42),e.qSk(),e.j41(1,"svg",43),e.nrm(2,"path",44),e.k0s(),e.joV(),e.j41(3,"p",45),e.EFF(4,"No follow-ups available for this lead."),e.k0s()())}let v=(()=>{class a{constructor(i,d){this.route=i,this.apiService=d,this.leadDetails=null,this.followUps=[],this.errorMessage="",this.isScrolled=!1}onWindowScroll(){this.isScrolled=window.scrollY>20}ngOnInit(){this.route.queryParams.subscribe(i=>{this.leadId=+i.leadId,this.leadId?this.fetchLeadAndFollowUps():this.errorMessage="No lead ID provided."})}fetchLeadAndFollowUps(){this.apiService.getFollowUps(this.leadId).subscribe({next:i=>{i.status?(this.leadDetails=i.lead,this.followUps=i.followups.sort((d,o)=>new Date(o.created_at).getTime()-new Date(d.created_at).getTime())):this.errorMessage="Failed to fetch data."},error:i=>{this.errorMessage="Error fetching data.",console.error("API Error:",i)}})}getMediumBadgeClass(i){return{email:"bg-blue-100 text-blue-800",phone_call:"bg-green-100 text-green-800",text_message:"bg-purple-100 text-purple-800"}[i]||"bg-gray-100 text-gray-800"}static{this.\u0275fac=function(d){return new(d||a)(e.rXU(y.nX),e.rXU(G))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-followup-list-details"]],hostBindings:function(d,o){1&d&&e.bIt("scroll",function(){return o.onWindowScroll()},!1,e.tSv)},standalone:!0,features:[e.aNF],decls:12,vars:6,consts:[[1,"min-h-screen","bg-gray-50"],[1,"sticky","top-0","z-40","bg-white","shadow-md","transition-all","duration-300"],[1,"container","mx-auto","p-6"],["class","bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6",4,"ngIf"],[1,"space-y-6"],[1,"text-xl","font-semibold","text-gray-800","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],["class","space-y-4",4,"ngIf"],["class","text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-200",4,"ngIf"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","rounded-xl","p-6"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","gap-6"],[1,"flex-1"],[1,"flex","items-center","gap-2","text-sm","text-gray-500","mb-1"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"text-2xl","font-bold","text-gray-800","mb-4"],[1,"space-y-3"],[1,"flex","items-center","gap-4","text-gray-600"],[1,"flex","items-center","gap-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"],[1,"text-sm","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],[1,"flex","flex-col","gap-4"],[1,"text-sm","text-gray-500","mb-1"],[1,"flex","flex-wrap","gap-3"],[1,"flex","flex-col"],[1,"text-xs","text-gray-500","mb-1"],[1,"px-3","py-1","bg-blue-100","text-blue-800","rounded-full","text-sm"],[1,"px-3","py-1","bg-purple-100","text-purple-800","rounded-full","text-sm"],[1,"px-3","py-1","bg-green-100","text-green-800","rounded-full","text-sm"],[1,"space-y-4"],["class","bg-white rounded-lg shadow-sm border border-gray-100 p-6 transition-all duration-300 hover:shadow-md",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-100","p-6","transition-all","duration-300","hover:shadow-md"],[1,"flex","flex-col","md:flex-row","justify-between","gap-4"],[1,"flex","items-center","gap-3","mb-3"],[1,"px-3","py-1","rounded-full","text-sm","font-medium"],[1,"text-gray-500","text-sm"],[1,"text-gray-700","mb-3"],[1,"flex","flex-wrap","gap-4","text-sm","text-gray-500"],[1,"flex","items-center","gap-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-center","py-12","bg-gray-50","rounded-lg","border-2","border-dashed","border-gray-200"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","text-gray-400","mx-auto","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-gray-500","text-lg"]],template:function(d,o){1&d&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,Se,44,6,"div",3),e.k0s()(),e.j41(4,"div",2)(5,"div",4)(6,"h2",5),e.qSk(),e.j41(7,"svg",6),e.nrm(8,"path",7),e.k0s(),e.EFF(9),e.k0s(),e.DNE(10,Re,2,1,"div",8)(11,Ue,5,0,"div",9),e.k0s()()()),2&d&&(e.R7$(),e.AVh("shadow-lg",o.isScrolled),e.R7$(2),e.Y8G("ngIf",o.leadDetails),e.R7$(6),e.SpI(" Follow-up History (",o.followUps.length,") "),e.R7$(),e.Y8G("ngIf",o.followUps.length>0),e.R7$(),e.Y8G("ngIf",0===o.followUps.length))},dependencies:[F.MD,F.Sq,F.bT,F.PV,F.vh],styles:["[_nghost-%COMP%]{display:block}"]})}}return a})();const A=[{path:"new_leads",component:B},{path:"all_leads",component:se},{path:"user_manage",component:_e},{path:"noti_manage",component:$},{path:"followUps",component:v}];let _=(()=>{class a{static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275mod=e.$C({type:a})}static{this.\u0275inj=e.G2t({imports:[F.MD,y.iI.forChild(A),E.R,z.q1,m.YN,m.X1,ce.N0,B,se,S.ed,_e,v]})}}return a})()},4511:(je,ee,k)=>{var de;!function(y,z,F,E){"use strict";var j,ce=["","webkit","Moz","MS","ms","o"],m=z.createElement("div"),e="function",V=Math.round,N=Math.abs,G=Date.now;function te(t,n,s){return setTimeout(ne(t,s),n)}function X(t,n,s){return!!Array.isArray(t)&&(I(t,s[n],s),!0)}function I(t,n,s){var r;if(t)if(t.forEach)t.forEach(n,s);else if(t.length!==E)for(r=0;r<t.length;)n.call(s,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&n.call(s,t[r],r,t)}function ue(t,n,s){var r="DEPRECATED METHOD: "+n+"\n"+s+" AT \n";return function(){var c=new Error("get-stack-trace"),u=c&&c.stack?c.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",g=y.console&&(y.console.warn||y.console.log);return g&&g.call(y.console,r,u),t.apply(this,arguments)}}j="function"!=typeof Object.assign?function(n){if(n===E||null===n)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(n),r=1;r<arguments.length;r++){var c=arguments[r];if(c!==E&&null!==c)for(var u in c)c.hasOwnProperty(u)&&(s[u]=c[u])}return s}:Object.assign;var pe=ue(function(n,s,r){for(var c=Object.keys(s),u=0;u<c.length;)(!r||r&&n[c[u]]===E)&&(n[c[u]]=s[c[u]]),u++;return n},"extend","Use `assign`."),we=ue(function(n,s){return pe(n,s,!0)},"merge","Use `assign`.");function x(t,n,s){var c,r=n.prototype;(c=t.prototype=Object.create(r)).constructor=t,c._super=r,s&&j(c,s)}function ne(t,n){return function(){return t.apply(n,arguments)}}function ie(t,n){return typeof t==e?t.apply(n&&n[0]||E,n):t}function he(t,n){return t===E?n:t}function B(t,n,s){I(J(n),function(r){t.addEventListener(r,s,!1)})}function S(t,n,s){I(J(n),function(r){t.removeEventListener(r,s,!1)})}function me(t,n){for(;t;){if(t==n)return!0;t=t.parentNode}return!1}function O(t,n){return t.indexOf(n)>-1}function J(t){return t.trim().split(/\s+/g)}function Y(t,n,s){if(t.indexOf&&!s)return t.indexOf(n);for(var r=0;r<t.length;){if(s&&t[r][s]==n||!s&&t[r]===n)return r;r++}return-1}function Z(t){return Array.prototype.slice.call(t,0)}function ge(t,n,s){for(var r=[],c=[],u=0;u<t.length;){var g=n?t[u][n]:t[u];Y(c,g)<0&&r.push(t[u]),c[u]=g,u++}return s&&(r=n?r.sort(function(T,C){return T[n]>C[n]}):r.sort()),r}function Q(t,n){for(var s,r,c=n[0].toUpperCase()+n.slice(1),u=0;u<ce.length;){if((r=(s=ce[u])?s+c:n)in t)return r;u++}return E}var Me=1;function se(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||y}var fe="ontouchstart"in y,Ne=Q(y,"PointerEvent")!==E,_e=fe&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),$="touch",oe="mouse",Ue=25,v=1,_=4,a=8,h=1,i=2,d=4,o=8,l=16,f=i|d,p=o|l,$e=f|p,qe=["x","y"],ve=["clientX","clientY"];function w(t,n){var s=this;this.manager=t,this.callback=n,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(r){ie(t.options.enable,[t])&&s.handler(r)},this.init()}function pt(t,n,s){var r=s.pointers.length,c=s.changedPointers.length,u=n&v&&r-c==0,g=n&(_|a)&&r-c==0;s.isFirst=!!u,s.isFinal=!!g,u&&(t.session={}),s.eventType=n,function ht(t,n){var s=t.session,r=n.pointers,c=r.length;s.firstInput||(s.firstInput=We(n)),c>1&&!s.firstMultiple?s.firstMultiple=We(n):1===c&&(s.firstMultiple=!1);var u=s.firstInput,g=s.firstMultiple,b=g?g.center:u.center,T=n.center=ze(r);n.timeStamp=G(),n.deltaTime=n.timeStamp-u.timeStamp,n.angle=Oe(b,T),n.distance=be(b,T),function mt(t,n){var s=n.center,r=t.offsetDelta||{},c=t.prevDelta||{},u=t.prevInput||{};(n.eventType===v||u.eventType===_)&&(c=t.prevDelta={x:u.deltaX||0,y:u.deltaY||0},r=t.offsetDelta={x:s.x,y:s.y}),n.deltaX=c.x+(s.x-r.x),n.deltaY=c.y+(s.y-r.y)}(s,n),n.offsetDirection=Ze(n.deltaX,n.deltaY);var C=Je(n.deltaTime,n.deltaX,n.deltaY);n.overallVelocityX=C.x,n.overallVelocityY=C.y,n.overallVelocity=N(C.x)>N(C.y)?C.x:C.y,n.scale=g?function _t(t,n){return be(n[0],n[1],ve)/be(t[0],t[1],ve)}(g.pointers,r):1,n.rotation=g?function ft(t,n){return Oe(n[1],n[0],ve)+Oe(t[1],t[0],ve)}(g.pointers,r):0,n.maxPointers=s.prevInput?n.pointers.length>s.prevInput.maxPointers?n.pointers.length:s.prevInput.maxPointers:n.pointers.length,function gt(t,n){var c,u,g,b,s=t.lastInterval||n,r=n.timeStamp-s.timeStamp;if(n.eventType!=a&&(r>Ue||s.velocity===E)){var T=n.deltaX-s.deltaX,C=n.deltaY-s.deltaY,U=Je(r,T,C);u=U.x,g=U.y,c=N(U.x)>N(U.y)?U.x:U.y,b=Ze(T,C),t.lastInterval=n}else c=s.velocity,u=s.velocityX,g=s.velocityY,b=s.direction;n.velocity=c,n.velocityX=u,n.velocityY=g,n.direction=b}(s,n);var U=t.element;me(n.srcEvent.target,U)&&(U=n.srcEvent.target),n.target=U}(t,s),t.emit("hammer.input",s),t.recognize(s),t.session.prevInput=s}function We(t){for(var n=[],s=0;s<t.pointers.length;)n[s]={clientX:V(t.pointers[s].clientX),clientY:V(t.pointers[s].clientY)},s++;return{timeStamp:G(),pointers:n,center:ze(n),deltaX:t.deltaX,deltaY:t.deltaY}}function ze(t){var n=t.length;if(1===n)return{x:V(t[0].clientX),y:V(t[0].clientY)};for(var s=0,r=0,c=0;c<n;)s+=t[c].clientX,r+=t[c].clientY,c++;return{x:V(s/n),y:V(r/n)}}function Je(t,n,s){return{x:n/t||0,y:s/t||0}}function Ze(t,n){return t===n?h:N(t)>=N(n)?t<0?i:d:n<0?o:l}function be(t,n,s){s||(s=qe);var r=n[s[0]]-t[s[0]],c=n[s[1]]-t[s[1]];return Math.sqrt(r*r+c*c)}function Oe(t,n,s){return s||(s=qe),180*Math.atan2(n[s[1]]-t[s[1]],n[s[0]]-t[s[0]])/Math.PI}w.prototype={handler:function(){},init:function(){this.evEl&&B(this.element,this.evEl,this.domHandler),this.evTarget&&B(this.target,this.evTarget,this.domHandler),this.evWin&&B(se(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(se(this.element),this.evWin,this.domHandler)}};var vt={mousedown:v,mousemove:2,mouseup:_},bt="mousedown",yt="mousemove mouseup";function ye(){this.evEl=bt,this.evWin=yt,this.pressed=!1,w.apply(this,arguments)}x(ye,w,{handler:function(n){var s=vt[n.type];s&v&&0===n.button&&(this.pressed=!0),2&s&&1!==n.which&&(s=_),this.pressed&&(s&_&&(this.pressed=!1),this.callback(this.manager,s,{pointers:[n],changedPointers:[n],pointerType:oe,srcEvent:n}))}});var Ft={pointerdown:v,pointermove:2,pointerup:_,pointercancel:a,pointerout:a},Et={2:$,3:"pen",4:oe,5:"kinect"},Qe="pointerdown",Ke="pointermove pointerup pointercancel";function Ae(){this.evEl=Qe,this.evWin=Ke,w.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}y.MSPointerEvent&&!y.PointerEvent&&(Qe="MSPointerDown",Ke="MSPointerMove MSPointerUp MSPointerCancel"),x(Ae,w,{handler:function(n){var s=this.store,r=!1,c=n.type.toLowerCase().replace("ms",""),u=Ft[c],g=Et[n.pointerType]||n.pointerType,b=g==$,T=Y(s,n.pointerId,"pointerId");u&v&&(0===n.button||b)?T<0&&(s.push(n),T=s.length-1):u&(_|a)&&(r=!0),!(T<0)&&(s[T]=n,this.callback(this.manager,u,{pointers:s,changedPointers:[n],pointerType:g,srcEvent:n}),r&&s.splice(T,1))}});var Tt={touchstart:v,touchmove:2,touchend:_,touchcancel:a};function et(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,w.apply(this,arguments)}function Ct(t,n){var s=Z(t.touches),r=Z(t.changedTouches);return n&(_|a)&&(s=ge(s.concat(r),"identifier",!0)),[s,r]}x(et,w,{handler:function(n){var s=Tt[n.type];if(s===v&&(this.started=!0),this.started){var r=Ct.call(this,n,s);s&(_|a)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,s,{pointers:r[0],changedPointers:r[1],pointerType:$,srcEvent:n})}}});var jt={touchstart:v,touchmove:2,touchend:_,touchcancel:a},wt="touchstart touchmove touchend touchcancel";function Fe(){this.evTarget=wt,this.targetIds={},w.apply(this,arguments)}function Mt(t,n){var s=Z(t.touches),r=this.targetIds;if(n&(2|v)&&1===s.length)return r[s[0].identifier]=!0,[s,s];var c,u,g=Z(t.changedTouches),b=[],T=this.target;if(u=s.filter(function(C){return me(C.target,T)}),n===v)for(c=0;c<u.length;)r[u[c].identifier]=!0,c++;for(c=0;c<g.length;)r[g[c].identifier]&&b.push(g[c]),n&(_|a)&&delete r[g[c].identifier],c++;return b.length?[ge(u.concat(b),"identifier",!0),b]:void 0}x(Fe,w,{handler:function(n){var s=jt[n.type],r=Mt.call(this,n,s);r&&this.callback(this.manager,s,{pointers:r[0],changedPointers:r[1],pointerType:$,srcEvent:n})}});var It=2500;function De(){w.apply(this,arguments);var t=ne(this.handler,this);this.touch=new Fe(this.manager,t),this.mouse=new ye(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Lt(t,n){t&v?(this.primaryTouch=n.changedPointers[0].identifier,nt.call(this,n)):t&(_|a)&&nt.call(this,n)}function nt(t){var n=t.changedPointers[0];if(n.identifier===this.primaryTouch){var s={x:n.clientX,y:n.clientY};this.lastTouches.push(s);var r=this.lastTouches;setTimeout(function(){var u=r.indexOf(s);u>-1&&r.splice(u,1)},It)}}function Nt(t){for(var n=t.srcEvent.clientX,s=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var c=this.lastTouches[r],u=Math.abs(n-c.x),g=Math.abs(s-c.y);if(u<=25&&g<=25)return!0}return!1}x(De,w,{handler:function(n,s,r){var u=r.pointerType==oe;if(!(u&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(r.pointerType==$)Lt.call(this,s,r);else if(u&&Nt.call(this,r))return;this.callback(n,s,r)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var it=Q(m.style,"touchAction"),st=it!==E,ot="compute",Pe="manipulation",q="none",re="pan-x",ae="pan-y",Ee=function Rt(){if(!st)return!1;var t={},n=y.CSS&&y.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(s){t[s]=!n||y.CSS.supports("touch-action",s)}),t}();function Ve(t,n){this.manager=t,this.set(n)}Ve.prototype={set:function(t){t==ot&&(t=this.compute()),st&&this.manager.element.style&&Ee[t]&&(this.manager.element.style[it]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return I(this.manager.recognizers,function(n){ie(n.options.enable,[n])&&(t=t.concat(n.getTouchAction()))}),function St(t){if(O(t,q))return q;var n=O(t,re),s=O(t,ae);return n&&s?q:n||s?n?re:ae:O(t,Pe)?Pe:"auto"}(t.join(" "))},preventDefaults:function(t){var n=t.srcEvent,s=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,c=O(r,q)&&!Ee[q],u=O(r,ae)&&!Ee[ae],g=O(r,re)&&!Ee[re];if(c&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;return g&&u||!(c||u&&s&f||g&&s&p)?void 0:this.preventSrc(n)}n.preventDefault()},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Te=1,R=32;function P(t){this.options=j({},this.defaults,t||{}),this.id=function Ie(){return Me++}(),this.manager=null,this.options.enable=he(this.options.enable,!0),this.state=Te,this.simultaneous={},this.requireFail=[]}function at(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function lt(t){return t==l?"down":t==o?"up":t==i?"left":t==d?"right":""}function ke(t,n){var s=n.manager;return s?s.get(t):t}function L(){P.apply(this,arguments)}function xe(){L.apply(this,arguments),this.pX=null,this.pY=null}function Ge(){L.apply(this,arguments)}function Xe(){P.apply(this,arguments),this._timer=null,this._input=null}function Ye(){L.apply(this,arguments)}function He(){L.apply(this,arguments)}function Ce(){P.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function W(t,n){return(n=n||{}).recognizers=he(n.recognizers,W.defaults.preset),new Be(t,n)}function Be(t,n){this.options=j({},W.defaults,n||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=function ut(t){return new(t.options.inputClass||(Ne?Ae:_e?Fe:fe?De:ye))(t,pt)}(this),this.touchAction=new Ve(this,this.options.touchAction),ct(this,!0),I(this.options.recognizers,function(s){var r=this.add(new s[0](s[1]));s[2]&&r.recognizeWith(s[2]),s[3]&&r.requireFailure(s[3])},this)}function ct(t,n){var r,s=t.element;s.style&&(I(t.options.cssProps,function(c,u){r=Q(s.style,u),n?(t.oldCssProps[r]=s.style[r],s.style[r]=c):s.style[r]=t.oldCssProps[r]||""}),n||(t.oldCssProps={}))}P.prototype={defaults:{},set:function(t){return j(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(X(t,"recognizeWith",this))return this;var n=this.simultaneous;return n[(t=ke(t,this)).id]||(n[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return X(t,"dropRecognizeWith",this)||(t=ke(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(X(t,"requireFailure",this))return this;var n=this.requireFail;return-1===Y(n,t=ke(t,this))&&(n.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(X(t,"dropRequireFailure",this))return this;t=ke(t,this);var n=Y(this.requireFail,t);return n>-1&&this.requireFail.splice(n,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var n=this,s=this.state;function r(c){n.manager.emit(c,t)}s<8&&r(n.options.event+at(s)),r(n.options.event),t.additionalEvent&&r(t.additionalEvent),s>=8&&r(n.options.event+at(s))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=R},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(R|Te)))return!1;t++}return!0},recognize:function(t){var n=j({},t);if(!ie(this.options.enable,[this,n]))return this.reset(),void(this.state=R);56&this.state&&(this.state=Te),this.state=this.process(n),30&this.state&&this.tryEmit(n)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(L,P,{defaults:{pointers:1},attrTest:function(t){var n=this.options.pointers;return 0===n||t.pointers.length===n},process:function(t){var n=this.state,s=t.eventType,r=6&n,c=this.attrTest(t);return r&&(s&a||!c)?16|n:r||c?s&_?8|n:2&n?4|n:2:R}}),x(xe,L,{defaults:{event:"pan",threshold:10,pointers:1,direction:$e},getTouchAction:function(){var t=this.options.direction,n=[];return t&f&&n.push(ae),t&p&&n.push(re),n},directionTest:function(t){var n=this.options,s=!0,r=t.distance,c=t.direction,u=t.deltaX,g=t.deltaY;return c&n.direction||(n.direction&f?(c=0===u?h:u<0?i:d,s=u!=this.pX,r=Math.abs(t.deltaX)):(c=0===g?h:g<0?o:l,s=g!=this.pY,r=Math.abs(t.deltaY))),t.direction=c,s&&r>n.threshold&&c&n.direction},attrTest:function(t){return L.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var n=lt(t.direction);n&&(t.additionalEvent=this.options.event+n),this._super.emit.call(this,t)}}),x(Ge,L,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[q]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),x(Xe,P,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(t){var n=this.options,s=t.pointers.length===n.pointers,r=t.distance<n.threshold,c=t.deltaTime>n.time;if(this._input=t,!r||!s||t.eventType&(_|a)&&!c)this.reset();else if(t.eventType&v)this.reset(),this._timer=te(function(){this.state=8,this.tryEmit()},n.time,this);else if(t.eventType&_)return 8;return R},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&_?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=G(),this.manager.emit(this.options.event,this._input)))}}),x(Ye,L,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[q]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),x(He,L,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:f|p,pointers:1},getTouchAction:function(){return xe.prototype.getTouchAction.call(this)},attrTest:function(t){var s,n=this.options.direction;return n&(f|p)?s=t.overallVelocity:n&f?s=t.overallVelocityX:n&p&&(s=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&N(s)>this.options.velocity&&t.eventType&_},emit:function(t){var n=lt(t.offsetDirection);n&&this.manager.emit(this.options.event+n,t),this.manager.emit(this.options.event,t)}}),x(Ce,P,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pe]},process:function(t){var n=this.options,s=t.pointers.length===n.pointers,r=t.distance<n.threshold,c=t.deltaTime<n.time;if(this.reset(),t.eventType&v&&0===this.count)return this.failTimeout();if(r&&c&&s){if(t.eventType!=_)return this.failTimeout();var u=!this.pTime||t.timeStamp-this.pTime<n.interval,g=!this.pCenter||be(this.pCenter,t.center)<n.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,g&&u?this.count+=1:this.count=1,this._input=t,0==this.count%n.taps)return this.hasRequireFailures()?(this._timer=te(function(){this.state=8,this.tryEmit()},n.interval,this),2):8}return R},failTimeout:function(){return this._timer=te(function(){this.state=R},this.options.interval,this),R},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),W.VERSION="2.0.7",W.defaults={domEvents:!1,touchAction:ot,enable:!0,inputTarget:null,inputClass:null,preset:[[Ye,{enable:!1}],[Ge,{enable:!1},["rotate"]],[He,{direction:f}],[xe,{direction:f},["swipe"]],[Ce],[Ce,{event:"doubletap",taps:2},["tap"]],[Xe]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Be.prototype={set:function(t){return j(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var n=this.session;if(!n.stopped){this.touchAction.preventDefaults(t);var s,r=this.recognizers,c=n.curRecognizer;(!c||c&&8&c.state)&&(c=n.curRecognizer=null);for(var u=0;u<r.length;)s=r[u],2===n.stopped||c&&s!=c&&!s.canRecognizeWith(c)?s.reset():s.recognize(t),!c&&14&s.state&&(c=n.curRecognizer=s),u++}},get:function(t){if(t instanceof P)return t;for(var n=this.recognizers,s=0;s<n.length;s++)if(n[s].options.event==t)return n[s];return null},add:function(t){if(X(t,"add",this))return this;var n=this.get(t.options.event);return n&&this.remove(n),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(X(t,"remove",this))return this;if(t=this.get(t)){var n=this.recognizers,s=Y(n,t);-1!==s&&(n.splice(s,1),this.touchAction.update())}return this},on:function(t,n){if(t!==E&&n!==E){var s=this.handlers;return I(J(t),function(r){s[r]=s[r]||[],s[r].push(n)}),this}},off:function(t,n){if(t!==E){var s=this.handlers;return I(J(t),function(r){n?s[r]&&s[r].splice(Y(s[r],n),1):delete s[r]}),this}},emit:function(t,n){this.options.domEvents&&function Ot(t,n){var s=z.createEvent("Event");s.initEvent(t,!0,!0),s.gesture=n,n.target.dispatchEvent(s)}(t,n);var s=this.handlers[t]&&this.handlers[t].slice();if(s&&s.length){n.type=t,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var r=0;r<s.length;)s[r](n),r++}},destroy:function(){this.element&&ct(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},j(W,{INPUT_START:v,INPUT_MOVE:2,INPUT_END:_,INPUT_CANCEL:a,STATE_POSSIBLE:Te,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:R,DIRECTION_NONE:h,DIRECTION_LEFT:i,DIRECTION_RIGHT:d,DIRECTION_UP:o,DIRECTION_DOWN:l,DIRECTION_HORIZONTAL:f,DIRECTION_VERTICAL:p,DIRECTION_ALL:$e,Manager:Be,Input:w,TouchAction:Ve,TouchInput:Fe,MouseInput:ye,PointerEventInput:Ae,TouchMouseInput:De,SingleTouchInput:et,Recognizer:P,AttrRecognizer:L,Tap:Ce,Pan:xe,Swipe:He,Pinch:Ge,Rotate:Ye,Press:Xe,on:B,off:S,each:I,merge:we,extend:pe,assign:j,inherit:x,bindFn:ne,prefixed:Q}),(typeof y<"u"?y:typeof self<"u"?self:{}).Hammer=W,(de=function(){return W}.call(ee,k,ee,je))!==E&&(je.exports=de)}(window,document)}}]);