"use strict";(self.webpackChunkmaterial_pro_angular_lite=self.webpackChunkmaterial_pro_angular_lite||[]).push([[873],{873:($,u,r)=>{r.r(u),r.d(u,{DashboardModule:()=>T});var d=r(8498),l=r(177),g=r(5938),t=r(4438),c=r(4419);function f(o,a){1&o&&(t.j41(0,"div",2),t.EFF(1," Loading lead counts...\n"),t.k0s())}function m(o,a){if(1&o&&(t.j41(0,"div",4)(1,"div",5)(2,"div")(3,"h3",6),t.EFF(4),t.k0s(),t.j41(5,"p",10),t.EFF(6),t.k0s()(),t.nrm(7,"i",11),t.k0s()()),2&o){const e=a.$implicit,n=t.XpG(2);t.R7$(4),t.SpI("",n.formatStatusName(e.name)," Leads"),t.R7$(),t.Y8G("ngClass",n.statusClasses(e)),t.R7$(),t.SpI(" ",e.count," "),t.R7$(),t.Y8G("ngClass",n.statusIcon(e))}}function _(o,a){if(1&o&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div")(4,"h3",6),t.EFF(5,"Total Leads"),t.k0s(),t.j41(6,"p",7),t.EFF(7),t.k0s()(),t.nrm(8,"i",8),t.k0s()(),t.DNE(9,m,8,4,"div",9),t.k0s()),2&o){const e=t.XpG();t.R7$(7),t.JRh(e.leadCounts.total),t.R7$(2),t.Y8G("ngForOf",e.leadCounts.statuses)}}let h=(()=>{class o{constructor(e){this.leadStatsService=e,this.leadCounts={total:0,statuses:[{id:1,name:"NoAction",count:205},{id:2,name:"InProgress",count:1},{id:3,name:"JobRelated",count:0},{id:4,name:"Converted",count:0},{id:5,name:"Lost",count:0}]}}ngOnInit(){this.fetchLeadCounts()}fetchLeadCounts(){this.leadStatsService.getLeadCounts().subscribe(e=>{e.success?this.leadCounts=e.data:console.error("Failed to fetch lead counts:",e.message)},e=>{console.error("Error fetching lead counts:",e)})}formatStatusName(e){return e.replace(/([A-Z])/g," $1").trim()}statusClasses(e){switch(e.name){case"Converted":return"text-green-600";case"InProgress":return"text-orange-600";case"JobRelated":return"text-purple-600";case"Lost":return"text-red-600";case"NoAction":return"text-blue-600";default:return"text-gray-600"}}statusIcon(e){switch(e.name){case"Converted":return"fas fa-check-circle text-green-500";case"InProgress":return"fas fa-spinner text-orange-500";case"JobRelated":return"fas fa-briefcase text-purple-500";case"Lost":return"fas fa-times-circle text-red-500";case"NoAction":return"fas fa-hourglass-half text-blue-500";default:return"fas fa-question-circle text-gray-500"}}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(c.G))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-stats-cards"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[["class","text-center text-gray-500",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-6",4,"ngIf"],[1,"text-center","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-6","gap-6"],[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"flex","justify-between","items-center"],[1,"text-gray-500","uppercase","text-sm"],[1,"text-2xl","font-bold","text-blue-600"],[1,"fas","fa-chart-bar","text-blue-500","text-3xl"],["class","bg-white p-6 rounded-lg shadow-md",4,"ngFor","ngForOf"],[1,"text-2xl","font-bold",3,"ngClass"],[1,"text-3xl",3,"ngClass"]],template:function(n,s){1&n&&t.DNE(0,f,2,0,"div",0)(1,_,10,2,"div",1),2&n&&(t.Y8G("ngIf",!s.leadCounts),t.R7$(),t.Y8G("ngIf",s.leadCounts))},dependencies:[l.MD,l.YU,l.Sq,l.bT]})}}return o})();function C(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.openLeadFollowUp(s.id))}),t.j41(1,"div",6)(2,"div",7)(3,"i",8),t.EFF(4,"person"),t.k0s(),t.j41(5,"p",9),t.EFF(6),t.k0s()(),t.j41(7,"div",7)(8,"i",8),t.EFF(9,"email"),t.k0s(),t.j41(10,"p",10),t.EFF(11),t.k0s()(),t.j41(12,"div",7)(13,"i",8),t.EFF(14,"phone"),t.k0s(),t.j41(15,"p",11),t.EFF(16),t.k0s()()(),t.j41(17,"div",12)(18,"i",13),t.EFF(19),t.k0s(),t.j41(20,"span",14),t.EFF(21),t.k0s()()()}if(2&o){const e=a.$implicit,n=t.XpG();t.R7$(6),t.JRh(e.name),t.R7$(5),t.JRh(e.website),t.R7$(5),t.JRh(e.mobile),t.R7$(2),t.Y8G("ngClass",n.getStatusColor(e.status)),t.R7$(),t.JRh(n.getStatusIcon(e.status)),t.R7$(),t.Y8G("ngClass",n.getStatusColor(e.status)),t.R7$(),t.JRh(e.status)}}function w(o,a){1&o&&(t.j41(0,"div",15),t.EFF(1," No recent leads available.\n"),t.k0s())}let v=(()=>{class o{constructor(e){this.leadStatsService=e,this.recentLeads=[],this.statusColors={NoAction:"text-blue-500",InProgress:"text-orange-500",JobRelated:"text-purple-500",Converted:"text-green-500",Lost:"text-red-500"},this.statusIcons={NoAction:"hourglass_empty",InProgress:"sync",JobRelated:"work",Converted:"check_circle",Lost:"cancel"}}ngOnInit(){this.fetchRecentLeads()}fetchRecentLeads(){const e=localStorage.getItem("user_id");e?this.leadStatsService.getRecentLeads(e).subscribe(n=>{n.success?this.recentLeads=n.data:console.error("Failed to fetch recent leads:",n.message)},n=>{console.error("Error fetching recent leads:",n)}):console.error("User ID is not available in localStorage")}getStatusColor(e){return this.statusColors[e]||"text-gray-500"}getStatusIcon(e){return this.statusIcons[e]||"help_outline"}openLeadFollowUp(e){const n=btoa(e.toString());window.open(`https://ek-reps.com/ekarigar_leads/followUps?q=${n}`,"_blank")}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(c.G))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-recent-leads"]],standalone:!0,features:[t.aNF],decls:6,vars:2,consts:[[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"text-2xl","font-semibold","mb-4","text-gray-800"],[1,"divide-y"],["class","py-4 flex justify-between items-center cursor-pointer hover:bg-gray-200 p-4 rounded-lg transition duration-300 ease-in-out shadow-sm",3,"click",4,"ngFor","ngForOf"],["class","text-center text-gray-500 py-4 text-lg",4,"ngIf"],[1,"py-4","flex","justify-between","items-center","cursor-pointer","hover:bg-gray-200","p-4","rounded-lg","transition","duration-300","ease-in-out","shadow-sm",3,"click"],[1,"flex","flex-col","space-y-2"],[1,"flex","items-center","space-x-2"],[1,"material-icons","text-blue-600","text-lg"],[1,"font-medium","text-gray-900","text-lg"],[1,"text-sm","text-gray-700"],[1,"text-sm","text-blue-700","font-semibold"],[1,"flex","items-center","space-x-2","bg-gray-100","px-3","py-1","rounded-full"],[1,"material-icons","text-lg",3,"ngClass"],[1,"text-sm","font-semibold",3,"ngClass"],[1,"text-center","text-gray-500","py-4","text-lg"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Recent Leads"),t.k0s(),t.j41(3,"div",2),t.DNE(4,C,22,7,"div",3),t.k0s()(),t.DNE(5,w,2,0,"div",4)),2&n&&(t.R7$(4),t.Y8G("ngForOf",s.recentLeads),t.R7$(),t.Y8G("ngIf",0===s.recentLeads.length))},dependencies:[l.MD,l.YU,l.Sq,l.bT]})}}return o})();function x(o,a){1&o&&(t.j41(0,"div",5),t.nrm(1,"div",6)(2,"div",6)(3,"div",6),t.k0s())}function b(o,a){1&o&&(t.j41(0,"div",7),t.EFF(1," No lead sources available. "),t.k0s())}function F(o,a){if(1&o&&(t.j41(0,"div",10)(1,"span",11),t.EFF(2),t.k0s(),t.j41(3,"div",12),t.nrm(4,"div",13),t.k0s(),t.j41(5,"span"),t.EFF(6),t.k0s()()),2&o){const e=a.$implicit;t.R7$(2),t.JRh(e.source.replace("_"," ")),t.R7$(2),t.xc7("width",e.percentage+"%"),t.Y8G("ngClass",e.color),t.BMQ("aria-label","Lead source "+e.source+": "+e.percentage+"%"),t.R7$(2),t.SpI("",e.percentage,"%")}}function y(o,a){if(1&o&&(t.j41(0,"div",8),t.DNE(1,F,7,6,"div",9),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.leadSources)}}let O=(()=>{class o{constructor(e){this.apiService=e,this.leadSources=[],this.isLoading=!0,this.leadSourceColors={website:"bg-blue-600",referral:"bg-green-600",social_media:"bg-purple-600",event:"bg-yellow-600",cold_call:"bg-red-600",email_campaign:"bg-teal-600"}}ngOnInit(){this.fetchLeadSources()}fetchLeadSources(){this.apiService.getLeadSources().subscribe(e=>{e.success&&(this.leadSources=e.data.map(n=>{const s=n.source.toLowerCase().replace(/ /g,"_");return{source:n.source,percentage:n.percentage,color:this.leadSourceColors[s]||"bg-gray-400"}})),this.isLoading=!1},e=>{console.error("Error fetching lead sources:",e),this.isLoading=!1})}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(c.G))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-lead-sources"]],standalone:!0,features:[t.aNF],decls:6,vars:3,consts:[[1,"bg-white","p-6","rounded-lg","shadow-md"],[1,"text-xl","font-semibold","mb-4"],["class","animate-pulse space-y-2",4,"ngIf"],["class","text-gray-500 text-center",4,"ngIf"],["class","space-y-3",4,"ngIf"],[1,"animate-pulse","space-y-2"],[1,"h-2.5","bg-gray-200","rounded-full"],[1,"text-gray-500","text-center"],[1,"space-y-3"],["class","flex justify-between items-center",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center"],[1,"capitalize"],["aria-hidden","true",1,"w-2/3","bg-gray-200","rounded-full","h-2.5"],[1,"h-2.5","rounded-full",3,"ngClass"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Lead Sources"),t.k0s(),t.DNE(3,x,4,0,"div",2)(4,b,2,0,"div",3)(5,y,2,1,"div",4),t.k0s()),2&n&&(t.R7$(3),t.Y8G("ngIf",s.isLoading),t.R7$(),t.Y8G("ngIf",!s.isLoading&&0===s.leadSources.length),t.R7$(),t.Y8G("ngIf",!s.isLoading&&s.leadSources.length>0))},dependencies:[l.MD,l.YU,l.Sq,l.bT]})}}return o})();function M(o,a){1&o&&(t.j41(0,"div",9),t.EFF(1," Loading followups... "),t.k0s())}function k(o,a){if(1&o&&(t.j41(0,"div",10),t.EFF(1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.SpI(" ",e.error," ")}}function P(o,a){1&o&&(t.j41(0,"div",13),t.EFF(1," No followups scheduled for today "),t.k0s())}function R(o,a){if(1&o){const e=t.RV6();t.j41(0,"div",16),t.bIt("click",function(){const s=t.eBV(e).$implicit,i=t.XpG(3);return t.Njj(i.navigateToFollowup(s.lead_id))}),t.j41(1,"div",17),t.EFF(2),t.k0s(),t.j41(3,"div",18)(4,"div",19),t.EFF(5),t.k0s(),t.j41(6,"div",20)(7,"span",21),t.EFF(8),t.k0s()()()()}if(2&o){const e=a.$implicit,n=t.XpG(3);t.R7$(2),t.SpI(" ",n.formatDate(e.followup_date)," "),t.R7$(3),t.JRh(e.description),t.R7$(2),t.Y8G("ngClass",e.medium),t.R7$(),t.JRh(e.medium)}}function S(o,a){if(1&o&&(t.j41(0,"div",14),t.DNE(1,R,9,4,"div",15),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.followups)}}function I(o,a){if(1&o&&(t.j41(0,"div"),t.DNE(1,P,2,0,"div",11)(2,S,2,1,"div",12),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Y8G("ngIf",0===e.followups.length),t.R7$(),t.Y8G("ngIf",e.followups.length>0)}}let L=(()=>{class o{constructor(e,n){this.apiService=e,this.router=n,this.followups=[],this.totalFollowups=0,this.isLoading=!0,this.error=null}ngOnInit(){this.fetchTodaysFollowups()}fetchTodaysFollowups(){this.isLoading=!0,this.apiService.getTodaysFollowups().subscribe({next:e=>{this.followups=e.data.followups,this.totalFollowups=e.data.total,this.isLoading=!1},error:e=>{this.error="Failed to load followups",this.isLoading=!1,console.error("Error fetching followups:",e)}})}formatDate(e){return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}navigateToFollowup(e){const n=btoa(e.toString());window.open(`https://ek-reps.com/ekarigar_leads/followUps?q=${n}`,"_blank")}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(c.G),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-todays-followups"]],standalone:!0,features:[t.aNF],decls:10,vars:4,consts:[[1,"followups-card"],[1,"card-header"],[1,"text-2xl","font-semibold","mb-4","text-gray-800"],[1,"refresh-button",3,"click"],[1,"fas","fa-sync"],[1,"card-content"],["class","loading",4,"ngIf"],["class","error-message",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"error-message"],["class","no-data",4,"ngIf"],["class","followups-list",4,"ngIf"],[1,"no-data"],[1,"followups-list"],["class","followup-item",3,"click",4,"ngFor","ngForOf"],[1,"followup-item",3,"click"],[1,"followup-time"],[1,"followup-details"],[1,"followup-description"],[1,"followup-medium"],[1,"badge",3,"ngClass"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2),t.EFF(3),t.k0s(),t.j41(4,"div",3),t.bIt("click",function(){return s.fetchTodaysFollowups()}),t.nrm(5,"i",4),t.k0s()(),t.j41(6,"div",5),t.DNE(7,M,2,0,"div",6)(8,k,2,1,"div",7)(9,I,3,2,"div",8),t.k0s()()),2&n&&(t.R7$(3),t.SpI("Today's Followups (",s.totalFollowups,")"),t.R7$(4),t.Y8G("ngIf",s.isLoading),t.R7$(),t.Y8G("ngIf",s.error),t.R7$(),t.Y8G("ngIf",!s.isLoading&&!s.error))},dependencies:[l.MD,l.YU,l.Sq,l.bT],styles:[".followups-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;padding:1rem}.followups-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.followups-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.25rem;color:#333}.followups-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]{cursor:pointer;padding:.5rem;border-radius:50%;transition:background-color .2s}.followups-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .refresh-button[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.followups-card[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%], .followups-card[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%], .followups-card[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}.followups-card[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]{display:flex;padding:1rem;border-bottom:1px solid #eee;cursor:pointer;transition:background-color .2s}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-time[_ngcontent-%COMP%]{min-width:80px;font-weight:700;color:#555}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-details[_ngcontent-%COMP%]{flex:1;margin-left:1rem}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-details[_ngcontent-%COMP%]   .followup-description[_ngcontent-%COMP%]{margin-bottom:.5rem}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-details[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;text-transform:uppercase}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-details[_ngcontent-%COMP%]   .badge.email[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-details[_ngcontent-%COMP%]   .badge.text_message[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#388e3c}.followups-card[_ngcontent-%COMP%]   .followups-list[_ngcontent-%COMP%]   .followup-item[_ngcontent-%COMP%]   .followup-details[_ngcontent-%COMP%]   .badge.phone[_ngcontent-%COMP%]{background-color:#fff3e0;color:#f57c00}"]})}}return o})(),p=(()=>{class o{constructor(e){this.router=e;const n="true"===localStorage.getItem("logged_in"),s=parseInt(localStorage.getItem("login_time")||"0",10);(!n||Date.now()-s>864e5)&&(localStorage.clear(),this.router.navigate(["/login"]))}ngAfterViewInit(){}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[t.aNF],decls:12,vars:0,consts:[[1,"content"],[1,"stats-section"],[1,"mt-8","grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"lg:col-span-1"],[1,"flex","flex-col","space-y-6"],[1,"h-auto"]],template:function(n,s){1&n&&(t.j41(0,"div",0)(1,"div",1),t.nrm(2,"app-stats-cards"),t.k0s(),t.j41(3,"div",2)(4,"div",3),t.nrm(5,"app-recent-leads"),t.k0s(),t.j41(6,"div",3)(7,"div",4)(8,"div",5),t.nrm(9,"app-lead-sources"),t.k0s(),t.j41(10,"div",5),t.nrm(11,"app-todays-followups"),t.k0s()()()()())},dependencies:[h,v,O,L],encapsulation:2})}}return o})();const j=[{path:"",component:p}];let T=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[l.MD,g.R,d.iI.forChild(j),p]})}}return o})()}}]);